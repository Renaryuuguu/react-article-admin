import{b as o,j as e,L as d,r as m}from"../entry/index-ge0NekOz.js";import{L as n,r as l}from"./auth-api-jhK7R4tD.js";import{u as p}from"./hooks-sW-_MWQ4.js";import{U as u}from"./UserOutlined-3pYLWYId.js";import"./warning-bqm8fXvA.js";import"./AntdIcon-6H5T3Tb1.js";import"./index-qrTuUBDD.js";const y=()=>{const s=o(),r=p("POST"),a=t=>{r||s(t,{method:"POST",action:"/reg"})};return e.jsxs(antd.Form,{wrapperCol:{span:24},labelCol:{span:4},onFinish:a,children:[e.jsx(antd.Form.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名！"},{pattern:/^[a-zA-Z0-9]{1,10}$/,message:"用户名只能包含字母、数字，长度为1-10位"}],children:e.jsx(antd.Input,{prefix:e.jsx(u,{}),placeholder:"请输入用户名"})}),e.jsx(antd.Form.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码！"},{pattern:/^\S{6,15}$/,message:"密码长度为6-15位，且不能包含空格"}],children:e.jsx(antd.Input,{prefix:e.jsx(n,{}),type:"password",placeholder:"请输入密码"})}),e.jsx(antd.Form.Item,{label:"确认密码",name:"repassword",dependencies:["password"],rules:[{required:!0,message:"请确认密码！"},{pattern:/^\S{6,15}$/,message:"密码长度为6-15位，且不能包含空格"},({getFieldValue:t})=>({validator(c,i){return i===t("password")?Promise.resolve():Promise.reject(new Error("两次密码输入不一致!"))}})],validateFirst:!0,children:e.jsx(antd.Input,{prefix:e.jsx(n,{}),type:"password",placeholder:"请确认密码"})}),e.jsx(antd.Form.Item,{wrapperCol:{offset:4},children:e.jsxs(antd.Space,{direction:"vertical",children:[e.jsx(antd.Button,{type:"primary",htmlType:"submit",loading:r&&{delay:200},children:"注册"}),e.jsxs("div",{children:["转到",e.jsx(d,{to:"/login",children:"登录"})]})]})})]})},F=async({request:s})=>{const r=await s.formData();try{return await l(r),antd.message.success("注册成功，请登录"),m("/login?uname="+r.get("username"))}catch{return null}};export{F as action,y as default};
