import{b as l,j as e,B as d,L as p,r as u}from"../entry/index-HYVjuyXu.js";import{L as n,r as c}from"./auth-api-43V3CIlr.js";import{u as x}from"./hooks-6wdiGh58.js";import{F as s,I as i}from"./index-vkfpJKNu.js";import{S as j}from"./index-FvAIaAj1.js";import{s as h}from"./index-Ofe16QpN.js";import{U as f}from"./UserOutlined-WPzHvk6u.js";import"./EyeOutlined-9LXoceyI.js";import"./collapse-as1LdTNY.js";const O=()=>{const t=l(),r=x("POST"),o=a=>{r||t(a,{method:"POST",action:"/reg"})};return e.jsxs(s,{onFinish:o,size:"large",children:[e.jsx(s.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名！"},{pattern:/^[a-zA-Z0-9]{1,10}$/,message:"用户名只能包含字母、数字，长度为1-10位"}],children:e.jsx(i,{prefix:e.jsx(f,{}),placeholder:"Username"})}),e.jsx(s.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码！"},{pattern:/^\S{6,15}$/,message:"密码长度为6-15位，且不能包含空格"}],children:e.jsx(i,{prefix:e.jsx(n,{}),type:"password",placeholder:"Password"})}),e.jsx(s.Item,{label:"确认密码",name:"repassword",dependencies:["password"],rules:[{required:!0,message:"请确认密码！"},{pattern:/^\S{6,15}$/,message:"密码长度为6-15位，且不能包含空格"},({getFieldValue:a})=>({validator(g,m){return m===a("password")?Promise.resolve():Promise.reject(new Error("两次密码输入不一致!"))}})],validateFirst:!0,children:e.jsx(i,{prefix:e.jsx(n,{}),type:"password",placeholder:"Confirm password"})}),e.jsx(s.Item,{children:e.jsxs(j,{direction:"vertical",children:[e.jsx(d,{type:"primary",htmlType:"submit",loading:r&&{delay:200},children:"注册"}),e.jsxs("div",{children:["转到",e.jsx(p,{to:"/login",children:"登录"})]})]})})]})},q=async({request:t})=>{const r=await t.formData();try{return await c(r),h.success("注册成功，请登录"),u("/login?uname="+r.get("username"))}catch{return null}};export{q as action,O as default};
